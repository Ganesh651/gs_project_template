summary: datastore demo
tasks:
  - id: create_user
    description: datastore demo
    fn: com.gs.datastore
    args:
      datasource: <%inputs.body.db%>
      data: <% inputs.body.data %>
      config:
        method: <% inputs.params.entity_type %>.create
  
  - id: find_user 
    description: find users
    fn: com.gs.datastore
    args:
      datasource: <%inputs.body.db%>
      data:
        include:
          posts:
            where:
              published: false
          profile: true
      config:
        method: <% inputs.params.entity_type %>.findMany

    retry:
      maxAttempt: 2
      type: constant
      interval: 10s
